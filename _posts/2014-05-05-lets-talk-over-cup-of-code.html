---
layout: post
title: Let's Talk Over a Cup of Code!
date: '2014-05-05T21:14:00.002+05:30'
author: Rajeev Sreedharan
tags:
- GSoC
- Mailman
modified_time: '2014-05-05T21:19:17.588+05:30'
blogger_id: tag:blogger.com,1999:blog-2447788814762842787.post-7571676867850734660
blogger_orig_url: http://myfossblog.blogspot.com/2014/05/lets-talk-over-cup-of-code.html
---

<div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">After a few rounds of preliminary discussions on the mailing list, I felt it is better to begin building the CLI as per current design decisions. I feel that discussions over a piece of code would be more effective than just talk. Now that I have clearly expressed how I would approach the task and what's in my mind, it would be easy for the mentors to correct me or give me a proceed.</span></span></span></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><br /></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">I have made a fair progress on implementing the CLI in the last week.I am &nbsp;being a bit cautious and slow, as I have not yet received a review on the initial commits, which I expect at any moment.</span></span></span></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><br /></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0.5cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">Currently, I have implemented the following functionalities of the CLI project</span></span></span></div><ul><li><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">The 	directory structure</span></span></span></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">cli/</span></span></span></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">&nbsp; &nbsp;|--mmclient &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --- The mmclient command</span></span></span></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">&nbsp; &nbsp;|--core/</span></span></span></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">&nbsp; &nbsp; &nbsp; &nbsp; |--lists.py &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --- The file that holds the Lists class</span></span></span></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">&nbsp; &nbsp; &nbsp; &nbsp; |--domains.py &nbsp; &nbsp; --- The file that holds the Domains class</span></span></span></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">&nbsp; &nbsp;|--client/</span></span></span></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">&nbsp; &nbsp; &nbsp; &nbsp; |--cmdparser.py &nbsp;--- The command line parser parses aguments and triggers  </span></span></span>	</div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">&nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;an action</span></span></span></div><div style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">&nbsp; &nbsp; &nbsp; &nbsp; |--shell.py &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;--- The Command shell</span></span></span></div></li></ul><ul>	<div style="margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">The 	core directory contains the classes and scripts that perform the 	requested actions and the client directory holds the user interface 	managers like the shell and the command line parser.</span></span></span></div><div style="margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;"><br /></span></span></span></div><li><div style="margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">The 	<b>mmclient </b>command, which if used without arguments, launches 	the Mailman shell else performs the specified action on the 	specified instance</span></span></span></div></li></ul><ul><li>	<span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">The 	set of mailman commands follow the following format</span></span></span><br /> 	<span style="color: black;">	      <span style="font-family: Times New Roman;"><span style="font-size: medium;"><b>mmclient 	[instance name] [action] [options/flags]</b></span></span></span><br /> 	 	<span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">where 	the <b>instance name</b> can belong to <i>{domain, list, user}</i>,<b>	action</b> can belong to <i>{create, list, delete}. </i>The options 	and flags are used to provide arguments to the action, like<i> list 	name, domain name</i> and boolean flags like <i>ll</i><i>.</i></span></span></span></li></ul><ul><li><div style="margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">The 	command line parser script, instantiates the Mailman instance 	mentioned in the command, and uses the <i>getattr</i> function to 	get the method of the instance which corresponds to the action 	mentioned in the command. This imposes a strict yet reasonable 	restriction upon the classes, that <i>the methods corresponding to 	the action must have the same name as the action. </i>The arguments 	dictionary returned by argparse parser are passed to the class 	method.</span></span></span></div><div style="margin-bottom: 0cm;"></div><div style="margin-bottom: 0cm;"><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">This 	approach makes the implementation more scalable, although a bit 	restrictive with method names. My first implementation contained a 	if else ladder for each action, which requires to add an elif 	condition when a new action is added.</span></span></span></div></li></ul><ul><li>	<span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">If 	the Mailman installation uses a non default login credentials to 	login to the REST API, the credentials may be specified using the 	options <i>host, port, restuser,</i> and <i>restpass</i></span></span></span></li></ul><ul><li>	<span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">The 	<b>domain create </b>command is used to create new domains, and 	takes domain name as argument</span></span></span></li></ul><ul><li>	<span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">The 	<b>list create</b> command is used to create a new mailing list, and 	takes domain name and list name as arguments</span></span></span></li></ul><ul><li>	<span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">The 	<b>list </b>action is implemented for both domains and lists. Using 	the â€“ll flag gives a detailed listing of domain or list. Listing 	mailing lists takes an optional argument domain name that can be 	used to filter out the lists</span></span></span></li></ul><ul><li>	<span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">The 	long list feature produces a pretty printed table, describing the 	lists or domains. For lists, List ID, list name, mail host, display 	name, FQDN listen name are printed, while for domains  base 	URL,contact address, mail host, URL host are printed. The long list 	feature is implemented using the python tabulate package, which has 	been added to Mailman client install requires.</span></span></span></li></ul><ul><li><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">All 	of the exceptions that have occurred during the development, like 	</span></span></span><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;"><i>MailmanConnectionError, 	urllib2.HTTPError</i></span></span></span><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">, 	have been handled appropriately and corresponding error messages are 	displayed when they occour.</span></span></span></li></ul><ul><li><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">The 	usage of developed commands are updated in the cli/docs/using.txt 	file</span></span></span></li></ul><ul><li><span style="color: black;"><span style="font-family: Times New Roman;"><span style="font-size: medium;">Here is the <a href="https://code.launchpad.net/~rajeevs1992/mailman.client/mailmancli" target="_blank">link to the Launchpad branch</a> that holds the project.</span></span></span></li></ul><div><span style="font-size: medium;"><br /></span></div><div><ul></ul></div>